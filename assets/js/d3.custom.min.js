!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Rt&&n.documentElement.namespaceURI===Rt?n.createElement(t):n.createElementNS(e,t)}}function e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){}function i(){return[]}function o(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function u(t,n,e,r,i,u){for(var a,s=0,c=n.length,f=u.length;s<f;++s)(a=n[s])?(a.__data__=u[s],r[s]=a):e[s]=new o(t,u[s]);for(;s<c;++s)(a=n[s])&&(i[s]=a)}function a(t,n,e,r,i,u,a){var s,c,f,l={},h=n.length,p=u.length,v=new Array(h);for(s=0;s<h;++s)(c=n[s])&&(v[s]=f=rn+a.call(c,c.__data__,s,n),f in l?i[s]=c:l[f]=c);for(s=0;s<p;++s)f=rn+a.call(t,u[s],s,u),(c=l[f])?(r[s]=c,c.__data__=u[s],l[f]=null):e[s]=new o(t,u[s]);for(s=0;s<h;++s)(c=n[s])&&l[v[s]]===c&&(i[s]=c)}function s(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function c(t){return function(){this.removeAttribute(t)}}function f(t){return function(){this.removeAttributeNS(t.space,t.local)}}function l(t,n){return function(){this.setAttribute(t,n)}}function h(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function p(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function v(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function y(t){return function(){this.style.removeProperty(t)}}function d(t,n,e){return function(){this.style.setProperty(t,n,e)}}function _(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function g(t,n){return t.style.getPropertyValue(n)||_n(t).getComputedStyle(t,null).getPropertyValue(n)}function m(t){return function(){delete this[t]}}function w(t,n){return function(){this[t]=n}}function x(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function A(t){return t.trim().split(/^|\s+/)}function N(t){return t.classList||new b(t)}function b(t){this._node=t,this._names=A(t.getAttribute("class")||"")}function M(t,n){for(var e=N(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function E(t,n){for(var e=N(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function S(t){return function(){M(this,t)}}function k(t){return function(){E(this,t)}}function C(t,n){return function(){(n.apply(this,arguments)?M:E)(this,t)}}function T(){this.textContent=""}function j(t){return function(){this.textContent=t}}function q(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function P(){this.innerHTML=""}function z(t){return function(){this.innerHTML=t}}function O(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function $(){this.nextSibling&&this.parentNode.appendChild(this)}function D(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L(){return null}function B(){var t=this.parentNode;t&&t.removeChild(this)}function I(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function R(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function U(t,n,e){return t=V(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function V(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function X(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function H(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function Y(t,n,e){var r=Tn.hasOwnProperty(t.type)?U:V;return function(i,o,u){var a,s=this.__on,c=r(n,o,u);if(s)for(var f=0,l=s.length;f<l;++f)if((a=s[f]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=e),void(a.value=n);this.addEventListener(t.type,c,e),a={type:t.type,name:t.name,value:n,listener:c,capture:e},s?s.push(a):this.__on=[a]}}function F(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function G(t,n,e){var r=_n(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function J(t,n){return function(){return G(this,t,n)}}function K(t,n){return function(){return G(this,t,n.apply(this,arguments))}}function Q(t,n){this._groups=t,this._parents=n}function W(){return new Q([[document.documentElement]],Pn)}function Z(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function tt(t,n){var e=Z(t);return function(r,i){return n(e(r),i,t)}}function nt(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function et(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function rt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function it(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,a,s,c,f,l,h,p=t._root,v={data:r},y=t._x0,d=t._y0,_=t._x1,g=t._y1;if(!p)return t._root=v,t;for(;p.length;)if((c=n>=(o=(y+_)/2))?y=o:_=o,(f=e>=(u=(d+g)/2))?d=u:g=u,i=p,!(p=p[l=f<<1|c]))return i[l]=v,t;if(a=+t._x.call(null,p.data),s=+t._y.call(null,p.data),n===a&&e===s)return v.next=p,i?i[l]=v:t._root=v,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=n>=(o=(y+_)/2))?y=o:_=o,(f=e>=(u=(d+g)/2))?d=u:g=u}while((l=f<<1|c)==(h=(s>=u)<<1|a>=o));return i[h]=p,i[l]=v,t}function ot(t){var n,e,r,i,o=t.length,u=new Array(o),a=new Array(o),s=1/0,c=1/0,f=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(u[e]=r,a[e]=i,r<s&&(s=r),r>f&&(f=r),i<c&&(c=i),i>l&&(l=i));for(f<s&&(s=this._x0,f=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(s,c).cover(f,l),e=0;e<o;++e)it(this,u[e],a[e],t[e]);return this}function ut(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function at(t){return t[0]}function st(t){return t[1]}function ct(t,n,e){var r=new ft(null==n?at:n,null==e?st:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ft(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function lt(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}function ht(){}function pt(t,n){var e=new ht;if(t instanceof ht)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function vt(){}function yt(t,n){var e=new vt;if(t instanceof vt)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function dt(t){return t.index}function _t(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function gt(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new mt(r)}function mt(t){this._=t}function wt(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function xt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function At(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=he,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function Nt(){return we||(Ne(bt),we=Ae.now()+xe)}function bt(){we=0}function Mt(){this._call=this._time=this._next=null}function Et(t,n,e){var r=new Mt;return r.restart(t,n,e),r}function St(){Nt(),++ye;for(var t,n=pe;n;)(t=we-n._time)>=0&&n._call.call(null,t),n=n._next;--ye}function kt(){we=(me=Ae.now())+xe,ye=de=0;try{St()}finally{ye=0,Tt(),we=0}}function Ct(){var t=Ae.now(),n=t-me;n>ge&&(xe-=n,me=t)}function Tt(){for(var t,n,e=pe,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pe=n);ve=t,jt(r)}function jt(t){if(!ye){de&&(de=clearTimeout(de));t-we>24?(t<1/0&&(de=setTimeout(kt,t-Ae.now()-xe)),_e&&(_e=clearInterval(_e))):(_e||(me=Ae.now(),_e=setInterval(Ct,ge)),ye=1,Ne(kt))}}function qt(t){return t.x}function Pt(t){return t.y}function zt(){t.event.stopImmediatePropagation()}function Ot(t,n){var e=t.document.documentElement,r=zn(t).on("dragstart.drag",null);n&&(r.on("click.drag",ke,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function $t(t,n,e,r,i,o,u,a,s,c){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=s,this._=c}function Dt(){return!t.event.button}function Lt(){return this.parentNode}function Bt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function It(){return"ontouchstart"in this}var Rt="http://www.w3.org/1999/xhtml",Ut={svg:"http://www.w3.org/2000/svg",xhtml:Rt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vt=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ut.hasOwnProperty(n)?{space:Ut[n],local:t}:t},Xt=function(t){var r=Vt(t);return(r.local?e:n)(r)},Ht=function(t){return null==t?r:function(){return this.querySelector(t)}},Yt=function(t){"function"!=typeof t&&(t=Ht(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],s=a.length,c=r[i]=new Array(s),f=0;f<s;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),c[f]=u);return new Q(r,this._parents)},Ft=function(t){return null==t?i:function(){return this.querySelectorAll(t)}},Gt=function(t){"function"!=typeof t&&(t=Ft(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],s=a.length,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new Q(r,i)},Jt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Kt=document.documentElement;if(!Kt.matches){var Qt=Kt.webkitMatchesSelector||Kt.msMatchesSelector||Kt.mozMatchesSelector||Kt.oMatchesSelector;Jt=function(t){return function(){return Qt.call(this,t)}}}}var Wt=Jt,Zt=function(t){"function"!=typeof t&&(t=Wt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,s=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&s.push(o);return new Q(r,this._parents)},tn=function(t){return new Array(t.length)},nn=function(){return new Q(this._enter||this._groups.map(tn),this._parents)};o.prototype={constructor:o,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var en=function(t){return function(){return t}},rn="$",on=function(t,n){if(!t)return y=new Array(this.size()),l=-1,this.each(function(t){y[++l]=t}),y;var e=n?a:u,r=this._parents,i=this._groups;"function"!=typeof t&&(t=en(t));for(var o=i.length,s=new Array(o),c=new Array(o),f=new Array(o),l=0;l<o;++l){var h=r[l],p=i[l],v=p.length,y=t.call(h,h&&h.__data__,l,r),d=y.length,_=c[l]=new Array(d),g=s[l]=new Array(d);e(h,p,_,g,f[l]=new Array(v),y,n);for(var m,w,x=0,A=0;x<d;++x)if(m=_[x]){for(x>=A&&(A=x+1);!(w=g[A])&&++A<d;);m._next=w||null}}return s=new Q(s,r),s._enter=c,s._exit=f,s},un=function(){return new Q(this._exit||this._groups.map(tn),this._parents)},an=function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,c=n[a],f=e[a],l=c.length,h=u[a]=new Array(l),p=0;p<l;++p)(s=c[p]||f[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new Q(u,this._parents)},sn=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},cn=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=s);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],c=a.length,f=i[o]=new Array(c),l=0;l<c;++l)(u=a[l])&&(f[l]=u);f.sort(n)}return new Q(i,this._parents).order()},fn=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},ln=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},hn=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},pn=function(){var t=0;return this.each(function(){++t}),t},vn=function(){return!this.node()},yn=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},dn=function(t,n){var e=Vt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?f:c:"function"==typeof n?e.local?v:p:e.local?h:l)(e,n))},_n=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},gn=function(t,n,e){return arguments.length>1?this.each((null==n?y:"function"==typeof n?_:d)(t,n,null==e?"":e)):g(this.node(),t)},mn=function(t,n){return arguments.length>1?this.each((null==n?m:"function"==typeof n?x:w)(t,n)):this.node()[t]};b.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wn=function(t,n){var e=A(t+"");if(arguments.length<2){for(var r=N(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?C:n?S:k)(e,n))},xn=function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?q:j)(t)):this.node().textContent},An=function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?O:z)(t)):this.node().innerHTML},Nn=function(){return this.each($)},bn=function(){return this.each(D)},Mn=function(t){var n="function"==typeof t?t:Xt(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},En=function(t,n){var e="function"==typeof t?t:Xt(t),r=null==n?L:"function"==typeof n?n:Ht(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},Sn=function(){return this.each(B)},kn=function(t){return this.select(t?R:I)},Cn=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Tn={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(Tn={mouseenter:"mouseover",mouseleave:"mouseout"})}var jn=function(t,n,e){var r,i,o=X(t+""),u=o.length;{if(!(arguments.length<2)){for(a=n?Y:H,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var s,c=0,f=a.length;c<f;++c)for(r=0,s=a[c];r<u;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value}},qn=function(t,n){return this.each(("function"==typeof n?K:J)(t,n))},Pn=[null];Q.prototype=W.prototype={constructor:Q,select:Yt,selectAll:Gt,filter:Zt,data:on,enter:nn,exit:un,merge:an,order:sn,sort:cn,call:fn,nodes:ln,node:hn,size:pn,empty:vn,each:yn,attr:dn,style:gn,property:mn,classed:wn,text:xn,html:An,raise:Nn,lower:bn,append:Mn,insert:En,remove:Sn,clone:kn,datum:Cn,on:jn,dispatch:qn};var zn=function(t){return"string"==typeof t?new Q([[document.querySelector(t)]],[document.documentElement]):new Q([[t]],Pn)},On=function(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e},$n=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},Dn=function(t){var n=On();return n.changedTouches&&(n=n.changedTouches[0]),$n(t,n)},Ln=function(t){return"string"==typeof t?new Q([document.querySelectorAll(t)],[document.documentElement]):new Q([null==t?[]:t],Pn)},Bn=function(t,n,e){arguments.length<3&&(e=n,n=On().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return $n(t,r);return null},In={},Rn={},Un=34,Vn=10,Xn=13,Hn=function(t){function n(t,n){var r,i,o=e(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?tt(t,n):Z(t)});return o.columns=i||[],o}function e(t,n){function e(){if(c)return Rn;if(f)return f=!1,In;var n,e,r=u;if(t.charCodeAt(r)===Un){for(;u++<o&&t.charCodeAt(u)!==Un||t.charCodeAt(++u)===Un;);return(n=u)>=o?c=!0:(e=t.charCodeAt(u++))===Vn?f=!0:e===Xn&&(f=!0,t.charCodeAt(u)===Vn&&++u),t.slice(r+1,n-1).replace(/""/g,'"')}for(;u<o;){if((e=t.charCodeAt(n=u++))===Vn)f=!0;else if(e===Xn)f=!0,t.charCodeAt(u)===Vn&&++u;else if(e!==s)continue;return t.slice(r,n)}return c=!0,t.slice(r,o)}var r,i=[],o=t.length,u=0,a=0,c=o<=0,f=!1;for(t.charCodeAt(o-1)===Vn&&--o,t.charCodeAt(o-1)===Xn&&--o;(r=e())!==Rn;){for(var l=[];r!==In&&r!==Rn;)l.push(r),r=e();n&&null==(l=n(l,a++))||i.push(l)}return i}function r(n,e){return null==e&&(e=nt(n)),[e.map(u).join(t)].concat(n.map(function(n){return e.map(function(t){return u(n[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(n){return n.map(u).join(t)}function u(t){return null==t?"":a.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n\r]"),s=t.charCodeAt(0);return{parse:n,parseRows:e,format:r,formatRows:i}},Yn=(Hn(","),Hn("\t"),function(t,n){return fetch(t,n).then(rt)}),Fn=function(t,n){function e(){var e,i,o=r.length,u=0,a=0;for(e=0;e<o;++e)i=r[e],u+=i.x,a+=i.y;for(u=u/o-t,a=a/o-n,e=0;e<o;++e)i=r[e],i.x-=u,i.y-=a}var r;return null==t&&(t=0),null==n&&(n=0),e.initialize=function(t){r=t},e.x=function(n){return arguments.length?(t=+n,e):t},e.y=function(t){return arguments.length?(n=+t,e):n},e},Gn=function(t){return function(){return t}},Jn=function(){return 1e-6*(Math.random()-.5)},Kn=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return it(this.cover(n,e),n,e,t)},Qn=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var u,a,s=i-e,c=this._root;switch(a=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{u=new Array(4),u[a]=c,c=u}while(s*=2,i=e+s,o=r+s,t>i||n>o);break;case 1:do{u=new Array(4),u[a]=c,c=u}while(s*=2,e=i-s,o=r+s,e>t||n>o);break;case 2:do{u=new Array(4),u[a]=c,c=u}while(s*=2,i=e+s,r=o-s,t>i||r>n);break;case 3:do{u=new Array(4),u[a]=c,c=u}while(s*=2,e=i-s,r=o-s,e>t||r>n)}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},Wn=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},Zn=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},te=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i},ne=function(t,n,e){var r,i,o,u,a,s,c,f=this._x0,l=this._y0,h=this._x1,p=this._y1,v=[],y=this._root;for(y&&v.push(new te(y,f,l,h,p)),null==e?e=1/0:(f=t-e,l=n-e,h=t+e,p=n+e,e*=e);s=v.pop();)if(!(!(y=s.node)||(i=s.x0)>h||(o=s.y0)>p||(u=s.x1)<f||(a=s.y1)<l))if(y.length){var d=(i+u)/2,_=(o+a)/2;v.push(new te(y[3],d,_,u,a),new te(y[2],i,_,d,a),new te(y[1],d,o,u,_),new te(y[0],i,o,d,_)),(c=(n>=_)<<1|t>=d)&&(s=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=s)}else{var g=t-+this._x.call(null,y.data),m=n-+this._y.call(null,y.data),w=g*g+m*m;if(w<e){var x=Math.sqrt(e=w);f=t-x,l=n-x,h=t+x,p=n+x,r=y.data}}return r},ee=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,a,s,c,f,l,h,p=this._root,v=this._x0,y=this._y0,d=this._x1,_=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(a=(v+d)/2))?v=a:d=a,(f=u>=(s=(y+_)/2))?y=s:_=s,n=p,!(p=p[l=f<<1|c]))return this;if(!p.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(e?e[h]=p:this._root=p),this):(this._root=i,this)},re=function(){return this._root},ie=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},oe=function(t){var n,e,r,i,o,u,a=[],s=this._root;for(s&&a.push(new te(s,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(s=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&s.length){var c=(r+o)/2,f=(i+u)/2;(e=s[3])&&a.push(new te(e,c,f,o,u)),(e=s[2])&&a.push(new te(e,r,f,c,u)),(e=s[1])&&a.push(new te(e,c,i,o,f)),(e=s[0])&&a.push(new te(e,r,i,c,f))}return this},ue=function(t){var n,e=[],r=[];for(this._root&&e.push(new te(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,s=n.x1,c=n.y1,f=(u+s)/2,l=(a+c)/2;(o=i[0])&&e.push(new te(o,u,a,f,l)),(o=i[1])&&e.push(new te(o,f,a,s,l)),(o=i[2])&&e.push(new te(o,u,l,f,c)),(o=i[3])&&e.push(new te(o,f,l,s,c))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},ae=function(t){return arguments.length?(this._x=t,this):this._x},se=function(t){return arguments.length?(this._y=t,this):this._y},ce=ct.prototype=ft.prototype;ce.copy=function(){var t,n,e=new ft(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=lt(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=lt(n));return e},ce.add=Kn,ce.addAll=ot,ce.cover=Qn,ce.data=Wn,ce.extent=Zn,ce.find=ne,ce.remove=ee,ce.removeAll=ut,ce.root=re,ce.size=ie,ce.visit=oe,ce.visitAfter=ue,ce.x=ae,ce.y=se;ht.prototype=pt.prototype={constructor:ht,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var fe=pt.prototype;vt.prototype=yt.prototype={constructor:vt,has:fe.has,add:function(t){return t+="",this["$"+t]=t,this},remove:fe.remove,clear:fe.clear,values:fe.keys,size:fe.size,empty:fe.empty,each:fe.each};var le=function(t){function n(t){return 1/Math.min(c[t.source.index],c[t.target.index])}function e(n){for(var e=0,r=t.length;e<v;++e)for(var i,o,s,c,l,h,p,y=0;y<r;++y)i=t[y],o=i.source,s=i.target,c=s.x+s.vx-o.x-o.vx||Jn(),l=s.y+s.vy-o.y-o.vy||Jn(),h=Math.sqrt(c*c+l*l),h=(h-a[y])/h*n*u[y],c*=h,l*=h,s.vx-=c*(p=f[y]),s.vy-=l*p,o.vx+=c*(p=1-p),o.vy+=l*p}function r(){if(s){var n,e,r=s.length,h=t.length,p=pt(s,l);for(n=0,c=new Array(r);n<h;++n)e=t[n],e.index=n,"object"!=typeof e.source&&(e.source=_t(p,e.source)),"object"!=typeof e.target&&(e.target=_t(p,e.target)),c[e.source.index]=(c[e.source.index]||0)+1,c[e.target.index]=(c[e.target.index]||0)+1;for(n=0,f=new Array(h);n<h;++n)e=t[n],f[n]=c[e.source.index]/(c[e.source.index]+c[e.target.index]);u=new Array(h),i(),a=new Array(h),o()}}function i(){if(s)for(var n=0,e=t.length;n<e;++n)u[n]=+h(t[n],n,t)}function o(){if(s)for(var n=0,e=t.length;n<e;++n)a[n]=+p(t[n],n,t)}var u,a,s,c,f,l=dt,h=n,p=Gn(30),v=1;return null==t&&(t=[]),e.initialize=function(t){s=t,r()},e.links=function(n){return arguments.length?(t=n,r(),e):t},e.id=function(t){return arguments.length?(l=t,e):l},e.iterations=function(t){return arguments.length?(v=+t,e):v},e.strength=function(t){return arguments.length?(h="function"==typeof t?t:Gn(+t),i(),e):h},e.distance=function(t){return arguments.length?(p="function"==typeof t?t:Gn(+t),o(),e):p},e},he={value:function(){}};mt.prototype=gt.prototype={constructor:mt,on:function(t,n){var e,r=this._,i=wt(t+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=At(r[e],t.name,n);else if(null==n)for(e in r)r[e]=At(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=xt(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new mt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,e=r.length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var pe,ve,ye=0,de=0,_e=0,ge=1e3,me=0,we=0,xe=0,Ae="object"==typeof performance&&performance.now?performance:Date,Ne="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};Mt.prototype=Et.prototype={constructor:Mt,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Nt():+e)+(null==n?0:+n),this._next||ve===this||(ve?ve._next=this:pe=this,ve=this),this._call=t,this._time=e,jt()},stop:function(){this._call&&(this._call=null,this._time=1/0,jt())}};var be=10,Me=Math.PI*(3-Math.sqrt(5)),Ee=function(t){function n(){e(),p.call("tick",o),u<a&&(h.stop(),p.call("end",o))}function e(){var n,e,r=t.length;for(u+=(c-u)*s,l.each(function(t){t(u)}),n=0;n<r;++n)e=t[n],null==e.fx?e.x+=e.vx*=f:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=f:(e.y=e.fy,e.vy=0)}function r(){for(var n,e=0,r=t.length;e<r;++e){if(n=t[e],n.index=e,isNaN(n.x)||isNaN(n.y)){var i=be*Math.sqrt(e),o=e*Me;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(n){return n.initialize&&n.initialize(t),n}var o,u=1,a=.001,s=1-Math.pow(a,1/300),c=0,f=.6,l=pt(),h=Et(n),p=gt("tick","end");return null==t&&(t=[]),r(),o={tick:e,restart:function(){return h.restart(n),o},stop:function(){return h.stop(),o},nodes:function(n){return arguments.length?(t=n,r(),l.each(i),o):t},alpha:function(t){return arguments.length?(u=+t,o):u},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(s=+t,o):+s},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(f=1-t,o):1-f},force:function(t,n){return arguments.length>1?(null==n?l.remove(t):l.set(t,i(n)),o):l.get(t)},find:function(n,e,r){var i,o,u,a,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)a=t[c],i=n-a.x,o=e-a.y,(u=i*i+o*o)<r&&(s=a,r=u);return s},on:function(t,n){return arguments.length>1?(p.on(t,n),o):p.on(t)}}},Se=function(){function t(t){var n,a=i.length,s=ct(i,qt,Pt).visitAfter(e);for(u=t,n=0;n<a;++n)o=i[n],s.visit(r)}function n(){if(i){var t,n,e=i.length;for(a=new Array(e),t=0;t<e;++t)n=i[t],a[n.index]=+s(n,t,i)}}function e(t){var n,e,r,i,o,u=0,s=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(u+=n.value,s+=e,r+=e*n.x,i+=e*n.y);t.x=r/s,t.y=i/s}else{n=t,n.x=n.data.x,n.y=n.data.y;do{u+=a[n.data.index]}while(n=n.next)}t.value=u}function r(t,n,e,r){if(!t.value)return!0;var i=t.x-o.x,s=t.y-o.y,h=r-n,p=i*i+s*s;if(h*h/l<p)return p<f&&(0===i&&(i=Jn(),p+=i*i),0===s&&(s=Jn(),p+=s*s),p<c&&(p=Math.sqrt(c*p)),o.vx+=i*t.value*u/p,o.vy+=s*t.value*u/p),!0;if(!(t.length||p>=f)){(t.data!==o||t.next)&&(0===i&&(i=Jn(),p+=i*i),0===s&&(s=Jn(),p+=s*s),p<c&&(p=Math.sqrt(c*p)));do{t.data!==o&&(h=a[t.data.index]*u/p,o.vx+=i*h,o.vy+=s*h)}while(t=t.next)}}var i,o,u,a,s=Gn(-30),c=1,f=1/0,l=.81;return t.initialize=function(t){i=t,n()},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:Gn(+e),n(),t):s},t.distanceMin=function(n){return arguments.length?(c=n*n,t):Math.sqrt(c)},t.distanceMax=function(n){return arguments.length?(f=n*n,t):Math.sqrt(f)},t.theta=function(n){return arguments.length?(l=n*n,t):Math.sqrt(l)},t},ke=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Ce=function(t){var n=t.document.documentElement,e=zn(t).on("dragstart.drag",ke,!0);"onselectstart"in n?e.on("selectstart.drag",ke,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")},Te=function(t){return function(){return t}};$t.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var je=function(){function n(t){t.on("mousedown.drag",e).filter(d).on("touchstart.drag",o).on("touchmove.drag",u).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!h&&p.apply(this,arguments)){var n=s("mouse",v.apply(this,arguments),Dn,this,arguments);n&&(zn(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),Ce(t.event.view),zt(),l=!1,c=t.event.clientX,f=t.event.clientY,n("start"))}}function r(){if(ke(),!l){var n=t.event.clientX-c,e=t.event.clientY-f;l=n*n+e*e>w}_.mouse("drag")}function i(){zn(t.event.view).on("mousemove.drag mouseup.drag",null),Ot(t.event.view,l),ke(),_.mouse("end")}function o(){if(p.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=v.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=s(r[n].identifier,i,Bn,this,arguments))&&(zt(),e("start"))}}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=_[r[n].identifier])&&(ke(),e("drag"))}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),n=0;n<i;++n)(e=_[r[n].identifier])&&(zt(),e("end"))}function s(e,r,i,o,u){var a,s,c,f=i(r,e),l=g.copy();if(F(new $t(n,"beforestart",a,e,m,f[0],f[1],0,0,l),function(){return null!=(t.event.subject=a=y.apply(o,u))&&(s=a.x-f[0]||0,c=a.y-f[1]||0,!0)}))return function t(h){var p,v=f;switch(h){case"start":_[e]=t,p=m++;break;case"end":delete _[e],--m;case"drag":f=i(r,e),p=m}F(new $t(n,h,a,e,p,f[0]+s,f[1]+c,f[0]-v[0],f[1]-v[1],l),l.apply,l,[h,o,u])}}var c,f,l,h,p=Dt,v=Lt,y=Bt,d=It,_={},g=gt("start","drag","end"),m=0,w=0;return n.filter=function(t){return arguments.length?(p="function"==typeof t?t:Te(!!t),n):p},n.container=function(t){return arguments.length?(v="function"==typeof t?t:Te(t),n):v},n.subject=function(t){return arguments.length?(y="function"==typeof t?t:Te(t),n):y},n.touchable=function(t){return arguments.length?(d="function"==typeof t?t:Te(!!t),n):d},n.on=function(){var t=g.on.apply(g,arguments);return t===g?n:t},n.clickDistance=function(t){return arguments.length?(w=(t=+t)*t,n):Math.sqrt(w)},n};t.select=zn,t.selectAll=Ln,t.json=Yn,t.forceSimulation=Ee,t.forceCenter=Fn,t.forceLink=le,t.forceManyBody=Se,t.drag=je,t.dispatch=gt,Object.defineProperty(t,"__esModule",{value:!0})});